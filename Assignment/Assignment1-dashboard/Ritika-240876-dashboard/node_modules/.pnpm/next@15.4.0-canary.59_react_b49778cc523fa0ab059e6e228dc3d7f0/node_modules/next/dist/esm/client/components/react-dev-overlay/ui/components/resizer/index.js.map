{"version":3,"sources":["../../../../../../../src/client/components/react-dev-overlay/ui/components/resizer/index.tsx"],"sourcesContent":["import { useEffect, useRef, useState, forwardRef } from 'react'\n\nexport const Resizer = forwardRef(function Resizer(\n  {\n    children,\n    measure,\n    ...props\n  }: {\n    children: React.ReactNode\n    measure: boolean\n  } & React.HTMLProps<HTMLDivElement>,\n  resizerRef: React.Ref<HTMLDivElement | null>\n) {\n  const ref = useRef<HTMLDivElement | null>(null)\n  const [height, measuring] = useMeasureHeight(ref, measure)\n\n  return (\n    <div\n      {...props}\n      ref={resizerRef}\n      // [x] Don't animate on initial load\n      // [x] No duplicate elements\n      // [x] Responds to content growth\n      style={{\n        height: measuring ? 'auto' : height,\n        transition: 'height 250ms var(--timing-swift)',\n      }}\n    >\n      <div ref={ref}>{children}</div>\n    </div>\n  )\n})\n\nfunction useMeasureHeight(\n  ref: React.RefObject<HTMLDivElement | null>,\n  measure: boolean\n): [number, boolean] {\n  const [height, setHeight] = useState<number>(0)\n  const [measuring, setMeasuring] = useState<boolean>(true)\n\n  useEffect(() => {\n    if (!measure) {\n      return\n    }\n\n    let timerId: number\n    const el = ref.current\n\n    if (!el) {\n      return\n    }\n\n    const observer = new ResizeObserver(([{ contentRect }]) => {\n      clearTimeout(timerId)\n\n      timerId = window.setTimeout(() => {\n        setMeasuring(false)\n      }, 100)\n\n      setHeight(contentRect.height)\n    })\n\n    observer.observe(el)\n    return () => observer.disconnect()\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [measure])\n\n  return [height, measuring]\n}\n"],"names":["useEffect","useRef","useState","forwardRef","Resizer","resizerRef","children","measure","props","ref","height","measuring","useMeasureHeight","div","style","transition","setHeight","setMeasuring","timerId","el","current","observer","ResizeObserver","contentRect","clearTimeout","window","setTimeout","observe","disconnect"],"mappings":";AAAA,SAASA,SAAS,EAAEC,MAAM,EAAEC,QAAQ,EAAEC,UAAU,QAAQ,QAAO;AAE/D,OAAO,MAAMC,wBAAUD,WAAW,SAASC,QACzC,KAOmC,EACnCC,UAA4C;IAR5C,IAAA,EACEC,QAAQ,EACRC,OAAO,EACP,GAAGC,OAI8B,GAPnC;IAUA,MAAMC,MAAMR,OAA8B;IAC1C,MAAM,CAACS,QAAQC,UAAU,GAAGC,iBAAiBH,KAAKF;IAElD,qBACE,KAACM;QACE,GAAGL,KAAK;QACTC,KAAKJ;QACL,oCAAoC;QACpC,4BAA4B;QAC5B,iCAAiC;QACjCS,OAAO;YACLJ,QAAQC,YAAY,SAASD;YAC7BK,YAAY;QACd;kBAEA,cAAA,KAACF;YAAIJ,KAAKA;sBAAMH;;;AAGtB,GAAE;AAEF,SAASM,iBACPH,GAA2C,EAC3CF,OAAgB;IAEhB,MAAM,CAACG,QAAQM,UAAU,GAAGd,SAAiB;IAC7C,MAAM,CAACS,WAAWM,aAAa,GAAGf,SAAkB;IAEpDF,UAAU;QACR,IAAI,CAACO,SAAS;YACZ;QACF;QAEA,IAAIW;QACJ,MAAMC,KAAKV,IAAIW,OAAO;QAEtB,IAAI,CAACD,IAAI;YACP;QACF;QAEA,MAAME,WAAW,IAAIC,eAAe;gBAAC,CAAC,EAAEC,WAAW,EAAE,CAAC;YACpDC,aAAaN;YAEbA,UAAUO,OAAOC,UAAU,CAAC;gBAC1BT,aAAa;YACf,GAAG;YAEHD,UAAUO,YAAYb,MAAM;QAC9B;QAEAW,SAASM,OAAO,CAACR;QACjB,OAAO,IAAME,SAASO,UAAU;IAChC,uDAAuD;IACzD,GAAG;QAACrB;KAAQ;IAEZ,OAAO;QAACG;QAAQC;KAAU;AAC5B","ignoreList":[0]}