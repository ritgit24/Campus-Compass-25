{"version":3,"sources":["../../../../../../../src/client/components/react-dev-overlay/ui/components/resizer/index.tsx"],"sourcesContent":["import { useEffect, useRef, useState, forwardRef } from 'react'\n\nexport const Resizer = forwardRef(function Resizer(\n  {\n    children,\n    measure,\n    ...props\n  }: {\n    children: React.ReactNode\n    measure: boolean\n  } & React.HTMLProps<HTMLDivElement>,\n  resizerRef: React.Ref<HTMLDivElement | null>\n) {\n  const ref = useRef<HTMLDivElement | null>(null)\n  const [height, measuring] = useMeasureHeight(ref, measure)\n\n  return (\n    <div\n      {...props}\n      ref={resizerRef}\n      // [x] Don't animate on initial load\n      // [x] No duplicate elements\n      // [x] Responds to content growth\n      style={{\n        height: measuring ? 'auto' : height,\n        transition: 'height 250ms var(--timing-swift)',\n      }}\n    >\n      <div ref={ref}>{children}</div>\n    </div>\n  )\n})\n\nfunction useMeasureHeight(\n  ref: React.RefObject<HTMLDivElement | null>,\n  measure: boolean\n): [number, boolean] {\n  const [height, setHeight] = useState<number>(0)\n  const [measuring, setMeasuring] = useState<boolean>(true)\n\n  useEffect(() => {\n    if (!measure) {\n      return\n    }\n\n    let timerId: number\n    const el = ref.current\n\n    if (!el) {\n      return\n    }\n\n    const observer = new ResizeObserver(([{ contentRect }]) => {\n      clearTimeout(timerId)\n\n      timerId = window.setTimeout(() => {\n        setMeasuring(false)\n      }, 100)\n\n      setHeight(contentRect.height)\n    })\n\n    observer.observe(el)\n    return () => observer.disconnect()\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [measure])\n\n  return [height, measuring]\n}\n"],"names":["Resizer","forwardRef","resizerRef","children","measure","props","ref","useRef","height","measuring","useMeasureHeight","div","style","transition","setHeight","useState","setMeasuring","useEffect","timerId","el","current","observer","ResizeObserver","contentRect","clearTimeout","window","setTimeout","observe","disconnect"],"mappings":";;;;+BAEaA;;;eAAAA;;;;uBAF2C;AAEjD,MAAMA,wBAAUC,IAAAA,iBAAU,EAAC,SAASD,QACzC,KAOmC,EACnCE,UAA4C;IAR5C,IAAA,EACEC,QAAQ,EACRC,OAAO,EACP,GAAGC,OAI8B,GAPnC;IAUA,MAAMC,MAAMC,IAAAA,aAAM,EAAwB;IAC1C,MAAM,CAACC,QAAQC,UAAU,GAAGC,iBAAiBJ,KAAKF;IAElD,qBACE,qBAACO;QACE,GAAGN,KAAK;QACTC,KAAKJ;QACL,oCAAoC;QACpC,4BAA4B;QAC5B,iCAAiC;QACjCU,OAAO;YACLJ,QAAQC,YAAY,SAASD;YAC7BK,YAAY;QACd;kBAEA,cAAA,qBAACF;YAAIL,KAAKA;sBAAMH;;;AAGtB;AAEA,SAASO,iBACPJ,GAA2C,EAC3CF,OAAgB;IAEhB,MAAM,CAACI,QAAQM,UAAU,GAAGC,IAAAA,eAAQ,EAAS;IAC7C,MAAM,CAACN,WAAWO,aAAa,GAAGD,IAAAA,eAAQ,EAAU;IAEpDE,IAAAA,gBAAS,EAAC;QACR,IAAI,CAACb,SAAS;YACZ;QACF;QAEA,IAAIc;QACJ,MAAMC,KAAKb,IAAIc,OAAO;QAEtB,IAAI,CAACD,IAAI;YACP;QACF;QAEA,MAAME,WAAW,IAAIC,eAAe;gBAAC,CAAC,EAAEC,WAAW,EAAE,CAAC;YACpDC,aAAaN;YAEbA,UAAUO,OAAOC,UAAU,CAAC;gBAC1BV,aAAa;YACf,GAAG;YAEHF,UAAUS,YAAYf,MAAM;QAC9B;QAEAa,SAASM,OAAO,CAACR;QACjB,OAAO,IAAME,SAASO,UAAU;IAChC,uDAAuD;IACzD,GAAG;QAACxB;KAAQ;IAEZ,OAAO;QAACI;QAAQC;KAAU;AAC5B","ignoreList":[0]}