{"version":3,"sources":["../../../../../../src/client/components/react-dev-overlay/ui/hooks/use-delayed-render.ts"],"sourcesContent":["import { useState, useEffect } from 'react'\n\ninterface Options {\n  enterDelay?: number\n  exitDelay?: number\n  onUnmount?: () => void\n}\n\ntype Timeout = ReturnType<typeof setTimeout>\n\n/**\n * Useful to perform CSS transitions on React components without\n * using libraries like Framer Motion. This hook will defer the\n * unmount of a React component until after a delay.\n *\n * @param active - Whether the component should be rendered\n * @param options - Options for the delayed render\n * @param options.enterDelay - Delay before rendering the component\n * @param options.exitDelay - Delay before unmounting the component\n *\n * const Modal = ({ active }) => {\n * const { mounted, rendered } = useDelayedRender(active, {\n *  exitDelay: 2000,\n * })\n *\n * if (!mounted) return null\n *\n * return (\n *   <Portal>\n *     <div className={rendered ? 'modal visible' : 'modal'}>...</div>\n *   </Portal>\n * )\n *}\n *\n * */\nexport function useDelayedRender(active = false, options: Options = {}) {\n  const [mounted, setMounted] = useState(active)\n  const [rendered, setRendered] = useState(false)\n\n  const { enterDelay = 1, exitDelay = 0 } = options\n  useEffect(() => {\n    let renderTimeout: Timeout | undefined\n    let unmountTimeout: Timeout | undefined\n\n    if (active) {\n      setMounted(true)\n      if (enterDelay <= 0) {\n        setRendered(true)\n      } else {\n        renderTimeout = setTimeout(() => {\n          setRendered(true)\n        }, enterDelay)\n      }\n    } else {\n      setRendered(false)\n      if (exitDelay <= 0) {\n        setMounted(false)\n      } else {\n        unmountTimeout = setTimeout(() => {\n          setMounted(false)\n        }, exitDelay)\n      }\n    }\n\n    return () => {\n      clearTimeout(renderTimeout)\n      clearTimeout(unmountTimeout)\n    }\n  }, [active, enterDelay, exitDelay])\n\n  return { mounted, rendered }\n}\n"],"names":["useState","useEffect","useDelayedRender","active","options","mounted","setMounted","rendered","setRendered","enterDelay","exitDelay","renderTimeout","unmountTimeout","setTimeout","clearTimeout"],"mappings":"AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,QAAO;AAU3C;;;;;;;;;;;;;;;;;;;;;;;;GAwBG,GACH,OAAO,SAASC,iBAAiBC,MAAc,EAAEC,OAAqB;IAArCD,IAAAA,mBAAAA,SAAS;IAAOC,IAAAA,oBAAAA,UAAmB,CAAC;IACnE,MAAM,CAACC,SAASC,WAAW,GAAGN,SAASG;IACvC,MAAM,CAACI,UAAUC,YAAY,GAAGR,SAAS;IAEzC,MAAM,EAAES,aAAa,CAAC,EAAEC,YAAY,CAAC,EAAE,GAAGN;IAC1CH,UAAU;QACR,IAAIU;QACJ,IAAIC;QAEJ,IAAIT,QAAQ;YACVG,WAAW;YACX,IAAIG,cAAc,GAAG;gBACnBD,YAAY;YACd,OAAO;gBACLG,gBAAgBE,WAAW;oBACzBL,YAAY;gBACd,GAAGC;YACL;QACF,OAAO;YACLD,YAAY;YACZ,IAAIE,aAAa,GAAG;gBAClBJ,WAAW;YACb,OAAO;gBACLM,iBAAiBC,WAAW;oBAC1BP,WAAW;gBACb,GAAGI;YACL;QACF;QAEA,OAAO;YACLI,aAAaH;YACbG,aAAaF;QACf;IACF,GAAG;QAACT;QAAQM;QAAYC;KAAU;IAElC,OAAO;QAAEL;QAASE;IAAS;AAC7B","ignoreList":[0]}